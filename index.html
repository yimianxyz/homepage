<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
    <meta name="description" content="Yimian Liu - Engineer and Researcher">
    <meta name="keywords" content="engineer, researcher, self-adaptive systems, emergent behavior, meta learning, collective learning">
    <meta name="author" content="Yimian Liu">
    <meta property="og:title" content="Yimian Liu - Engineer and Researcher">
    <meta property="og:description" content="I enjoy building self-adaptive systems that learn and evolve autonomously. My research interests include emergent behavior, meta learning, and collective learning.">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Yimian Liu">
    <title>Yimian Liu | home</title>
    <link rel="stylesheet" href="shared.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Configuration -->
    <script src="config/constants.js"></script>
    
    <!-- Simulation Runtime -->
    <script src="simulation/runtime/simulation_runtime.js"></script>
    
    <!-- Processors -->
    <script src="simulation/processors/input_processor.js"></script>
    <script src="simulation/processors/action_processor.js"></script>
    
    <!-- State Management -->
    <script src="simulation/state_manager/state_manager.js"></script>
    
    <!-- Policy -->
    <script src="policy/human_prior/closest_pursuit_policy.js"></script>
    
    <!-- UI Modules -->
    <script src="ui/canvas.js"></script>
    <script src="ui/rendering.js"></script>
    <script src="simulation/random_state_generator/random_state_generator.js"></script>
    <script src="ui/simulation.js"></script>
    <script src="ui/utils.js"></script>
    
    <style>
        .homepage-content {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <canvas id="boids1" class="simulation-canvas"></canvas>
    
    <main class="container content-overlay">
        <header class="homepage-header">
            <h1>Yimian Liu</h1>
        </header>
        
        <div class="homepage-content">
            <p>I am an AI Engineer and Researcher.</p>
            
            <p>I build self-adaptive systems that learn and evolve autonomously to solve real-world problems.</p>
            
            <p>My research explores emergent behavior, meta learning, and collective intelligence.</p>
            
            <p>I received my master's degree from Cornell, where I studied Computer Engineering.</p>
            
            <p>Find me on <a href="mailto:i@yimian.xyz">Email</a> | <a href="https://github.com/yimianxyz" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://www.linkedin.com/in/yimianxyz" target="_blank" rel="noopener noreferrer">LinkedIn</a></p>
        </div>
    </main>

    <script>
        /**
         * Canvas Utilities (using shared functions)
         */

        /**
         * Visualization/Rendering Functions (using shared functions)
         */

        /**
         * State Initialization (using shared functions)
         */

        /**
         * Main Simulation Class
         */
        function HomepageSimulation(canvasId) {
            this.canvas = document.getElementById(canvasId);
            this.ctx = this.canvas.getContext('2d');
            this.stateManager = new StateManager();
            this.policy = createPolicy('closest_pursuit');
            
            // Animation state
            this.isRunning = false;
            this.animationId = null;
        }

        HomepageSimulation.prototype.initialize = function() {
            // Set canvas size
            resizeCanvas('boids1');
            var canvasWidth = this.canvas.width;
            var canvasHeight = this.canvas.height;
            
            // Create initial state
            var initialState = generateClusteredState(
                window.SIMULATION_CONSTANTS.DEFAULT_NUM_BOIDS,
                canvasWidth,
                canvasHeight
            );
            
            // Initialize state manager with closest pursuit policy
            this.stateManager.init(initialState, this.policy);
            
            console.log("Homepage simulation initialized with closest pursuit policy");
            console.log("Boids:", window.SIMULATION_CONSTANTS.DEFAULT_NUM_BOIDS);
        };

        HomepageSimulation.prototype.step = function() {
            // Update canvas size if changed
            var newWidth = window.innerWidth;
            var newHeight = window.innerHeight;
            
            if (this.canvas.width !== newWidth || this.canvas.height !== newHeight) {
                resizeCanvas('boids1');
                
                // Update state with new canvas dimensions
                this.stateManager.currentState.canvas_width = newWidth;
                this.stateManager.currentState.canvas_height = newHeight;
            }
            
            // Step simulation
            var newState = this.stateManager.step();
            
            // Remove caught boids
            if (newState.caught_boids && newState.caught_boids.length > 0) {
                // Remove caught boids in reverse order to maintain indices
                for (var i = newState.caught_boids.length - 1; i >= 0; i--) {
                    newState.boids_states.splice(newState.caught_boids[i], 1);
                }
            }
        };

        HomepageSimulation.prototype.render = function() {
            // Clear canvas
            clearCanvas(this.ctx);
            
            var currentState = this.stateManager.currentState;
            
            // Render boids
            for (var i = 0; i < currentState.boids_states.length; i++) {
                renderBoid(this.ctx, currentState.boids_states[i], window.SIMULATION_CONSTANTS.BOID_RENDER_SIZE);
            }
            
            // Render predator
            renderPredator(this.ctx, currentState.predator_state, window.SIMULATION_CONSTANTS.PREDATOR_SIZE);
        };

        HomepageSimulation.prototype.animate = function() {
            if (!this.isRunning) return;
            
            this.step();
            this.render();
            
            this.animationId = requestAnimationFrame(this.animate.bind(this));
        };

        HomepageSimulation.prototype.start = function() {
            if (this.isRunning) return;
            
            this.isRunning = true;
            this.animate();
        };

        HomepageSimulation.prototype.stop = function() {
            this.isRunning = false;
            if (this.animationId) {
                cancelAnimationFrame(this.animationId);
                this.animationId = null;
            }
        };

        /**
         * Initialize on page load
         */
        document.addEventListener('DOMContentLoaded', function() {
            if (!isCanvasSupported()) {
                console.warn("Canvas not supported");
                return;
            }
            
            // Create and start simulation
            var simulation = new HomepageSimulation('boids1');
            simulation.initialize();
            simulation.start();
            
            // Handle window resize
            window.addEventListener('resize', function() {
                resizeCanvas('boids1');
            });
            
            // Store globally for debugging
            window.simulation = simulation;
        });
    </script>
</body>
</html> 